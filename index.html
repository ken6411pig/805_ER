<!DOCTYPE html>

<html lang="zh-TW">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Medical Record System</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
<style>
        /* Basic layout */
        body {
            margin: 0;
            padding: 0;
            display: flex;
            min-height: 100vh;
            font-family: Arial, sans-serif;
        }

        .sidebar {
            width: 200px;
            background-color: #f5f5f5;
            padding: 20px;
        }

        .sidebar div {
            padding: 10px;
            cursor: pointer;
        }

        .sidebar div:hover {
            background-color: #e0e0e0;
        }

        .main-content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            overflow-x: auto; /* Allow horizontal scrolling */
        }

        /* Content visibility */
        .hidden {
            display: none;
        }

        /* PE tabs */
        .pe-tabs {
            margin-bottom: 20px;
        }

        .pe-tabs span {
            padding: 10px;
            margin-right: 10px;
            cursor: pointer;
            background-color: #f0f0f0;
        }

        .pe-tabs span:hover {
            background-color: #e0e0e0;
        }

        .pe-content {
            margin-top: 20px;
        }

        /* Sections */
        .section {
            margin-bottom: 20px;
        }

        /* ICD Search Styles */
        .search-container {
            margin-bottom: 20px;
        }
        .search-box {
            padding: 10px;
            width: 400px;
            font-size: 16px;
            margin-right: 10px;
            border: 2px solid #ddd;
            border-radius: 4px;
        }
        .search-box:focus {
            border-color: #4CAF50;
            outline: none;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        th {
            background-color: #f4f4f4;
            position: sticky;
            top: 0;
        }
        tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        tr:hover {
            background-color: #f5f5f5;
        }
        .highlight {
            background-color: #fff3cd;
        }
        #results {
            max-height: 600px;
            overflow-y: auto;
        }
        .count-info {
            margin-top: 10px;
            color: #666;
        }
        .loading {
            color: #666;
            margin-top: 20px;
        }
        .min-length-notice {
            color: #666;
            margin-top: 10px;
            font-style: italic;
        }
    
        /* Surgery ICD table styles */
        .surgery-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            font-size: 14px;
            table-layout: auto; /* Allows columns to auto-size based on content */
        }

        .surgery-table td, .surgery-table th {
            padding: 10px;
            border: 1px solid #ccc;
            word-break: break-word; /* Still useful for extremely long single words */
            vertical-align: top;
            text-align: left;
            white-space: nowrap; /* Ensures text stays on a single line */
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
        }
        .trauma-main-content {
            display: grid;
            grid-template-columns: 400px 1fr;
            gap: 30px;
        }
        
        .view-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            justify-content: center;
        }
        
        .view-button {
            background: #6c757d;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .view-button.active {
            background: #007bff;
        }
        
        .view-button:hover {
            background: #495057;
        }
        
        .view-button.active:hover {
            background: #0056b3;
        }
        
        .body-diagram {
            position: relative;
            width: 300px;
            height: 600px;
            background: #fff;
            border: 2px solid #ddd;
            border-radius: 8px;
            margin: 0 auto;
        }
        
        .body-part {
            position: absolute;
            border: 2px solid transparent;
            border-radius: 4px;
            cursor: pointer;
            background: rgba(0, 123, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
            text-align: center;
            transition: all 0.3s;
        }
        
        .body-part:hover {
            background: rgba(0, 123, 255, 0.2);
            border-color: #007bff;
        }
        
        .body-part.selected {
            background: rgba(255, 0, 0, 0.2);
            border-color: #dc3545;
        }
        
        /* 正面視圖 */
        .front-view .head { top: 20px; left: 100px; width: 100px; height: 100px; border-radius: 50%; }
        .front-view .neck { top: 115px; left: 130px; width: 40px; height: 30px; }
        .front-view .chest { top: 140px; left: 80px; width: 140px; height: 100px; }
        .front-view .abdomen { top: 240px; left: 90px; width: 120px; height: 80px; }
        .front-view .pelvis { top: 320px; left: 100px; width: 100px; height: 60px; }
        .front-view .left-arm { top: 160px; right: 30px; width: 40px; height: 150px; }
        .front-view .right-arm { top: 160px; left: 35px; width: 40px; height: 150px; }
        .front-view .left-leg { top: 380px; right: 90px; width: 50px; height: 180px; }
        .front-view .right-leg { top: 380px; left: 90px; width: 50px; height: 180px; }
        
        /* 背面視圖 */
        .back-view .head { top: 20px; left: 100px; width: 100px; height: 100px; border-radius: 50%; }
        .back-view .neck { top: 115px; left: 130px; width: 40px; height: 30px; }
        .back-view .upper-back { top: 140px; left: 80px; width: 140px; height: 100px; }
        .back-view .lower-back { top: 240px; left: 90px; width: 120px; height: 80px; }
        .back-view .spine { top: 100px; left: 140px; width: 20px; height: 230px; }
        .back-view .buttocks { top: 320px; left: 100px; width: 100px; height: 60px; }
        .back-view .left-arm { top: 160px; left: 35px; width: 40px; height: 150px; }
        .back-view .right-arm { top: 160px; right: 30px; width: 40px; height: 150px; }
        .back-view .left-leg { top: 380px; left: 90px; width: 50px; height: 180px; }
        .back-view .right-leg { top: 380px; right: 90px; width: 50px; height: 180px; }
        
        .diagram-container {
            display: none;
        }
        
        .diagram-container.active {
            display: block;
        }
        
        .sub-part-selector {
            background: #e9ecef;
            border: 1px solid #ced4da;
            border-radius: 4px;
            padding: 15px;
            margin-bottom: 20px;
            display: none;
        }
        
        .sub-part-selector.active {
            display: block;
        }
        
        .sub-parts {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 8px;
            margin-top: 10px;
        }
        
        .sub-part {
            background: #6c757d;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }
        
        .sub-part:hover {
            background: #495057;
        }
        
        .injury-selector {
            background: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 15px;
            margin-bottom: 20px;
            display: none;
        }
        
        .injury-selector.active {
            display: block;
        }
        
        .injury-types {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 8px;
            margin-top: 10px;
        }
        
        .injury-type {
            background: #007bff;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }
        
        .injury-type:hover {
            background: #0056b3;
        }
        
        .selected-injuries {
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 15px;
            margin-bottom: 20px;
            background: white;
        }
        
        .injury-item {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            padding: 10px;
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .injury-details {
            font-family: monospace;
            font-size: 13px;
        }
        
        .remove-injury {
            background: #dc3545;
            color: white;
            border: none;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            cursor: pointer;
        }
        
        .generate-report {
            background: #28a745;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 4px;
            cursor: pointer;
            width: 100%;
            margin-bottom: 10px;
        }

        .clear-report {
            background: #dc3545;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 4px;
            cursor: pointer;
            width: 100%;
            margin-bottom: 15px;
        }

        .clear-report:hover {
            background: #c82333;
        }
        
        .report-output {
            background: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 15px;
            font-family: monospace;
            white-space: pre-wrap;
            line-height: 1.4;
            display: none;
        }
        
        .report-output.active {
            display: block;
        }
        
        .back-button {
            background: #6c757d;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            margin-bottom: 10px;
        }
        
        .back-button:hover {
            background: #495057;
        }

</style>
</head>
<body>
<div class="sidebar">
    <div data-page="History">History</div>
    <div data-page="PE">PE</div>
    <div data-page="ICD_code">ICD Code</div>
    <div data-page="Plan">Plan</div>
    <div data-page="Diagnosis">Certificate</div>
    <div data-page="Surgery_ICD">外傷ICD 代碼速查</div>
    <div data-page="Trauma_System">外傷圖譜系統</div>
</div>
<div class="main-content">
<div class="content" id="History">
<div class="section">
<p class="mb-2">
                    The patient who denied systemic disease before. NKA. No op history.
                </p>
<h3>Negative findings:</h3>
<p>
                    chills(-), fever(-), cough(-), sputum(-), hemoptysis(-), chest tightness(-), chest pain(-), refer pain(-), cold sweating(-), SOB(-), DOE(-), PND(-), orthopnea(-), abdominal pain(-), anorexia(-), dysphagia(-), nausea(-), vomiting(-), constipation(-), diarrhea(-),hematemesis(-), tarry stools(-), hematochezia(-), urgency(-), burning sensation(-), frequency(-), dysuria(-), hematuria(-), oligouria(-), body weight loss(-)
                </p>
</div>
<div class="section">
<h3>TOCC history:</h3>
<ul style="padding-left: 20px;">
<li>Occupation:</li>
<li>Cluster/contact history: Nil</li>
<li>Traveling history: Nil</li>
</ul>
</div>
<div class="section">
<h3>CAD risk factors:</h3>
<p>DM (-), HTN (-), hyperlipidemia (-), smoking (-), family history (-), 
                Old age (-) Male (-) Post menopause (-)</p>
</div>
</div>
<div class="content hidden" id="PE">
<div class="pe-tabs">
<span data-tab="內科" onclick="showPETab('內科')">MER</span>
<span data-tab="外科" onclick="showPETab('外科')">SER</span>
<span data-tab="OHCA" onclick="showPETab('OHCA')">OHCA</span>
</div>
<div class="pe-content" id="內科">
<p>
                    Consciousness: Clear, GCS: E4M6V5<br/>
                    Skin: Normal skin turgor<br/>
                    HEENT: Intact. No icteric sclera. No anemic conjunctiva, OU. No congestion over pharyngeal wall.<br/>
                    Neck: Supple. No JVE noted.<br/>
                    Chest: Symmetrical expension. Clear breathing sounds. Rale(-), Rhonchi(-), Wheezing(-)<br/>
                    Heart: Regular heart beat<br/>
                    Abdomen: Soft and flat. Normal bowel sound. No tenderness. No rebounding pain.<br/>
                    Extremities: no skin rash. no edema.<br/>
                    MP: 5, all limbs.
                </p>
</div>
<div class="pe-content hidden" id="外科">
<p>
                    Consciousness: Clear <br/>
                    GCS: E4M6V5, pupil: 2+/2+<br/>
                    Neck: Supple.<br/>
                    Chest: Symmetrical expension.Wheezing(-)<br/>
                    Heart: Regular heart beat<br/>
                    Abdomen: Soft. No tenderness.<br/>
                    Extremities: Free of ROM. <br/>
                    MP: 5, all limbs.
                </p>
</div>
<div class="pe-content hidden" id="OHCA">
<p>
                    Consciousness: Coma GCS: E1M1V1<br/>
                    Skin:Normal skin turgor, no skin rash<br/>
                    Neck: Supple.no palpable pulsation.<br/>
                    Chest: No breath sound.<br/>
                    Heart: No heart beat.<br/>
                    Abdomen: Soft and ovoid.<br/>
                    Extremities: No obvious wound over four limbs.<br/>
</p>
</div>
</div>
<div class="content hidden" id="ICD_code">
<h1>ICD-10-CM 診斷碼搜尋系統</h1>
<div class="section">
<h3>常用症狀ICD碼:</h3>
<p>
<table border="1">
<tr>
<td>R50.9 Fever, unspecified</td>
<td>R06.00 Dyspnea, unspecified</td>
<td>R07.9 Chest pain, unspecified</td>
</tr>
<tr>
<td>R11.10 Vomiting, unspecified</td>
<td>R10.9 Unspecified abdominal pain</td>
<td>R19.7 Diarrhea, unspecified</td>
</tr>
<tr>
<td>R42 Dizziness and giddiness</td>
<td>R51.9 Headache, unspecified</td>
<td>R05.9 Cough, unspecified</td>
</tr>
<tr>
<td>R53.1 Weakness</td>
<td>K92.2 Gastrointestinal hemorrhage, unspecified</td>
<td>T78.40XA Allergy, unspecified, initial encounter</td>
</tr>
<tr>
<td>T65.92XA Toxic effect of unspecified substance, intentional self-harm, initial encounter</td>
<td>R57.9 Shock, unspecified</td>
<td>I46.9 Cardiac arrest, cause unspecified</td>
</tr>
</table>
</p>
</div>
<div class="search-container">
<input class="search-box" id="searchInput" oninput="debounceSearch()" placeholder="請輸入至少2個字元進行搜尋" type="text"/>
</div>
<div class="count-info" id="countInfo"></div>
<div class="min-length-notice" id="minLengthNotice"></div>
<div id="results"></div>
</div>
<div class="content hidden" id="Plan">
<p>已告知細微骨裂未能完全於急診X光片能診斷出，若出院後持續疼痛需立即返診評估。</p>
<p>已詳細向病患與家屬解釋可能之病程變化與相關併發症，病人本人及家屬清楚明白。</p>
<p>After treatment, the patient was discharged with improved condition. OPD follow up was suggested. Inform of toxic signs.</p>
<p>We suggested that further hospitalization is necessary, but patient was discharged against medical advice (under his families requested) <p>
<p>Due to the patient’s personal reason, the patient asked for AAD. After well informing the possibility of sepsis and toxic signs, AAD was arranged. Keep OPD follow up.<p>
</div>
<div class="content hidden" id="Diagnosis">
<div>
<h2>診斷證明書</h2>
<p id="certificateText" style="white-space: pre-line;">
                    病人因上述疾病於民國113年 月 日 時 分至 時 分期間至本院急診就診並接受檢查，建議休養三日並門診追蹤複查。 <br/>
                    病人因上述疾病於民國113年 月 日 時 分至 時 分期間至本院急診就診並接受傷口縫合 針，建議門診追蹤複查。
                </p>
</div>
</div><div class="content hidden" id="Surgery_ICD">
    <table border="0" cellpadding="0" cellspacing="0" class="surgery-table">
        <colgroup>
            <col/>
            <col/>
            <col/>
            <col/>
            <col/>
            <col span="2"/>
            <col/>
            <col span="5"/>
        </colgroup>
        <thead>
            <tr height="22">
                <td class="xl67" colspan="5" height="22">急診醫學外傷部位 ICD-10 代碼速查表</td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr height="23">
                <td class="xl68" height="23">部位</td>
                <td class="xl69">A/W</td>
                <td class="xl69">L/W</td>
                <td class="xl69">Contusion</td>
                <td class="xl69">Fr.</td>
                <td class="xl69">Crush</td>
                <td class="xl69">Burn</td>
                <td class="xl69">Dislocation</td>
                <td class="xl69">Sprain</td>
                <td class="xl69">Strain</td>
                <td class="xl69">Cellulitis</td>
                <td class="xl69">OA</td>
                <td class="xl70">M1990</td>
            </tr>
        </thead>
        <tbody>
            <tr height="23">
                <td class="xl68" height="23">頭</td>
                <td class="xl70">S0001XA</td>
                <td class="xl70">S0101XA</td>
                <td class="xl70">S0093XA</td>
                <td class="xl70">S0291XA</td>
                <td class="xl70">S078XXA</td>
                <td class="xl70">T2009XA</td>
                <td class="xl70">　</td>
                <td class="xl70">S039XXA</td>
                <td class="xl70">S0911XA</td>
                <td class="xl70">L03811</td>
                <td class="xl75">咬傷</td>
                <td class="xl75">放最後</td>
            </tr>
            <tr height="23">
                <td class="xl68" height="23">臉</td>
                <td class="xl70">S0081XA</td>
                <td class="xl70">S01419A</td>
                <td class="xl70">S0993XA</td>
                <td class="xl70">S0292XA</td>
                <td class="xl70">S070XXA</td>
                <td class="xl70">T2009XA</td>
                <td class="xl70">　</td>
                <td class="xl70">　</td>
                <td class="xl70">　</td>
                <td class="xl70">L03211</td>
                <td class="xl75">鼠</td>
                <td class="xl70">W5311XA</td>
            </tr>
            <tr height="23">
                <td class="xl68" height="23">鼻</td>
                <td class="xl70">S0031XA</td>
                <td class="xl70">S0121XA</td>
                <td class="xl70">S0033XA</td>
                <td class="xl70">S022XA</td>
                <td class="xl70">　</td>
                <td class="xl70">T2004XA</td>
                <td class="xl70">S031XXA</td>
                <td class="xl70">　</td>
                <td class="xl70">　</td>
                <td class="xl70"><font class="font11">頸</font><font class="font7">L03221</font></td>
                <td class="xl75">狗</td>
                <td class="xl70">W540XXA</td>
            </tr>
            <tr height="23">
                <td class="xl68" height="23">耳</td>
                <td class="xl70">S00149A</td>
                <td class="xl70">S01319A</td>
                <td class="xl70">S00439A</td>
                <td class="xl70">　</td>
                <td class="xl70">　</td>
                <td class="xl70">T20019A</td>
                <td class="xl70">　</td>
                <td class="xl70">　</td>
                <td class="xl70">　</td>
                <td class="xl70">H6010</td>
                <td class="xl75">貓</td>
                <td class="xl70">W5501XA</td>
            </tr>
            <tr height="23">
                <td class="xl68" height="23">口</td>
                <td class="xl70">S00512A</td>
                <td class="xl70">S01511A</td>
                <td class="xl70">S00532A</td>
                <td class="xl70"><font class="font11">鎖</font><font class="font7">S42009A</font></td>
                <td class="xl70">　</td>
                <td class="xl70">T280XXA</td>
                <td class="xl70">　</td>
                <td class="xl70">　</td>
                <td class="xl70">　</td>
                <td class="xl70">K122</td>
                <td class="xl75">哺乳類</td>
                <td class="xl70">W5581XA</td>
            </tr>
            <tr height="23">
                <td class="xl68" height="23">肩</td>
                <td class="xl70">S40219A</td>
                <td class="xl70">S41019A</td>
                <td class="xl70">S40019A</td>
                <td class="xl70">M84319A</td>
                <td class="xl70">S479XXA</td>
                <td class="xl70">T22059A</td>
                <td class="xl70">S43006A</td>
                <td class="xl70">S43409A</td>
                <td class="xl70">S46019A</td>
                <td class="xl70">　</td>
                <td class="xl75">魚</td>
                <td class="xl70">W5651XA</td>
            </tr>
            <tr height="23">
                <td class="xl68" height="23">上臂</td>
                <td class="xl70">S40819A</td>
                <td class="xl70">S41109A</td>
                <td class="xl70">S40029A</td>
                <td class="xl70">肱<font class="font7">S42209A</font></td>
                <td class="xl70">S479XXA</td>
                <td class="xl70">T22039A</td>
                <td class="xl70">　</td>
                <td class="xl70">　</td>
                <td class="xl70">S46919A</td>
                <td class="xl70">　</td>
                <td class="xl75">蜂</td>
                <td class="xl70">T63444A</td>
            </tr>
            <tr height="35">
                <td class="xl68" height="35">肘</td>
                <td class="xl70">S50319A</td>
                <td class="xl70">S51019A</td>
                <td class="xl70">S5000XA</td>
                <td class="xl70">尺<font class="font7">S52009A<br/>
</font><font class="font8">橈</font><font class="font7">S52109A</font></td>
                <td class="xl70">S5700XA</td>
                <td class="xl70">T22029A</td>
                <td class="xl70"><font class="font11">橈</font><font class="font7">S53006A</font></td>
                <td class="xl70">S53409A</td>
                <td class="xl70">　</td>
                <td class="xl70">　</td>
                <td class="xl75">黃蜂</td>
                <td class="xl70">T63454A</td>
            </tr>
            <tr height="35">
                <td class="xl68" height="35">前臂</td>
                <td class="xl70">S50819A</td>
                <td class="xl70">S51819A</td>
                <td class="xl70">S5010XA</td>
                <td class="xl70">尺<font class="font7">S52609A<br/>
</font><font class="font8">橈</font><font class="font7">S52509A</font></td>
                <td class="xl70">S5780XA</td>
                <td class="xl70">T22019A</td>
                <td class="xl70">　</td>
                <td class="xl70">　</td>
                <td class="xl70">S56919A</td>
                <td class="xl70">　</td>
                <td class="xl75">蜈蚣</td>
                <td class="xl70">T63414A</td>
            </tr>
            <tr height="23">
                <td class="xl68" height="23">腕</td>
                <td class="xl70">S60819A</td>
                <td class="xl70">S61519A</td>
                <td class="xl70">S60219A</td>
                <td class="xl70">S62109A</td>
                <td class="xl70">S6730XA</td>
                <td class="xl70">T23079A</td>
                <td class="xl70">S63006A</td>
                <td class="xl70">S63509A</td>
                <td class="xl70">S66919A</td>
                <td class="xl70">　</td>
                <td class="xl75">毒蛇</td>
                <td class="xl70">T63094A</td>
            </tr>
            <tr height="23">
                <td class="xl68" height="23">手</td>
                <td class="xl70">S60519A</td>
                <td class="xl70">S61419A</td>
                <td class="xl70">S60229A</td>
                <td class="xl70">S62399A</td>
                <td class="xl70">S6720XA</td>
                <td class="xl70">T23009A</td>
                <td class="xl70">S63056A</td>
                <td class="xl70">S638X9A</td>
                <td class="xl70">S66919A</td>
                <td class="xl70">　</td>
                <td class="xl75">CO</td>
                <td class="xl70">T5894XA</td>
            </tr>
            <tr height="23">
                <td class="xl68" height="23">指</td>
                <td class="xl70">S60419A</td>
                <td class="xl70">S61219A</td>
                <td class="xl70">S6000XA</td>
                <td class="xl70">S62609A</td>
                <td class="xl70">S6710XA</td>
                <td class="xl70">T23049A</td>
                <td class="xl70">S63259A</td>
                <td class="xl70">S63619A</td>
                <td class="xl70">S66519A</td>
                <td class="xl70">L03019</td>
                <td class="xl69">BZD</td>
                <td class="xl70">T4274XA</td>
            </tr>
            <tr height="35">
                <td class="xl68" height="35">前胸</td>
                <td class="xl70">S20419A</td>
                <td class="xl70">S21119A</td>
                <td class="xl70">S20439A</td>
                <td class="xl70">S2231XA</td>
                <td class="xl70">S278XXA</td>
                <td class="xl70">T2109XA</td>
                <td class="xl70">S234XXA</td>
                <td class="xl70">S235XXA</td>
                <td class="xl70">　</td>
                <td class="xl70">L03311</td>
                <td class="xl75">酒精</td>
                <td class="xl70">T5194XA</td>
            </tr>
            <tr height="23">
                <td class="xl68" height="23">背</td>
                <td class="xl70">S2091XA</td>
                <td class="xl70">S21219A</td>
                <td class="xl70">S2093XA</td>
                <td class="xl70">S2200XA</td>
                <td class="xl70">S279XXA</td>
                <td class="xl70">T2100XA</td>
                <td class="xl70">S230XXA</td>
                <td class="xl70">S233XXA</td>
                <td class="xl70">S2911XA</td>
                <td class="xl70">　</td>
                <td class="xl75">安眠藥</td>
                <td class="xl70">T426X4A</td>
            </tr>
            <tr height="23">
                <td class="xl68" height="23">腰</td>
                <td class="xl70">S30819A</td>
                <td class="xl70">S31019A</td>
                <td class="xl70">S300XXA</td>
                <td class="xl70">S3200XA</td>
                <td class="xl70">S379XXA</td>
                <td class="xl70">T2100XA</td>
                <td class="xl70">S335XXA</td>
                <td class="xl70">S336XXA</td>
                <td class="xl70">S3901XA</td>
                <td class="xl70">M5450</td>
                <td class="xl75">抗憂鬱劑</td>
                <td class="xl70">T43204A</td>
            </tr>
            <tr height="23">
                <td class="xl68" height="23">腹</td>
                <td class="xl70">S3081XA</td>
                <td class="xl70">S31119A</td>
                <td class="xl70">S301XXA</td>
                <td class="xl70">S329XXA</td>
                <td class="xl70">S378XXA</td>
                <td class="xl70">T2100XA</td>
                <td class="xl70">　</td>
                <td class="xl70">S338XXA</td>
                <td class="xl70">　</td>
                <td class="xl70">　</td>
                <td class="xl75">其他藥物</td>
                <td class="xl70">T50994A</td>
            </tr>
            <tr height="23">
                <td class="xl68" height="23">臀</td>
                <td class="xl70">S30819A</td>
                <td class="xl70">S31819A</td>
                <td class="xl70">S302XXA</td>
                <td class="xl70">　</td>
                <td class="xl70">S378XXA</td>
                <td class="xl70">T2100XA</td>
                <td class="xl70">S330XXA</td>
                <td class="xl70">S339XXA</td>
                <td class="xl70">S3901XA</td>
                <td class="xl70">L03316</td>
                <td class="xl75">　</td>
                <td class="xl70">　</td>
            </tr>
            <tr height="23">
                <td class="xl68" height="23">股</td>
                <td class="xl70">S70119A</td>
                <td class="xl70">S71019A</td>
                <td class="xl70">S7000XA</td>
                <td class="xl70">S7290XA</td>
                <td class="xl70">S771XXA</td>
                <td class="xl70">T2400XA</td>
                <td class="xl70">S73006A</td>
                <td class="xl70">S73109A</td>
                <td class="xl70">S76919A</td>
                <td class="xl70">L03115</td>
                <td class="xl75">　</td>
                <td class="xl70">　</td>
            </tr>
            <tr height="23">
                <td class="xl68" height="23">膝</td>
                <td class="xl70">S80019A</td>
                <td class="xl70">S81019A</td>
                <td class="xl70">S8000XA</td>
                <td class="xl70">S8290XA</td>
                <td class="xl70">S878XXA</td>
                <td class="xl70">T2400XA</td>
                <td class="xl70">S8300XA</td>
                <td class="xl70">S8391XA</td>
                <td class="xl70">S86919A</td>
                <td class="xl70">M25569</td>
                <td class="xl75">　</td>
                <td class="xl70">　</td>
            </tr>
            <tr height="23">
                <td class="xl68" height="23">小腿</td>
                <td class="xl70">S80119A</td>
                <td class="xl70">S81819A</td>
                <td class="xl70">S8010XA</td>
                <td class="xl70">S8289XA</td>
                <td class="xl70">S878XXA</td>
                <td class="xl70">T2400XA</td>
                <td class="xl70">S838X9A</td>
                <td class="xl70">S8392XA</td>
                <td class="xl70">S86919A</td>
                <td class="xl70">L03116</td>
                <td class="xl75">　</td>
                <td class="xl70">　</td>
            </tr>
            <tr height="23">
                <td class="xl68" height="23">踝</td>
                <td class="xl70">S90019A</td>
                <td class="xl70">S91019A</td>
                <td class="xl70">S9000XA</td>
                <td class="xl70">S92819A</td>
                <td class="xl70">S970XXA</td>
                <td class="xl70">T2500XA</td>
                <td class="xl70">S930XXA</td>
                <td class="xl70">S93409A</td>
                <td class="xl70">S96919A</td>
                <td class="xl70">M25579</td>
                <td class="xl75">　</td>
                <td class="xl70">　</td>
            </tr>
            <tr height="23">
                <td class="xl68" height="23">足</td>
                <td class="xl70">S90419A</td>
                <td class="xl70">S91219A</td>
                <td class="xl70">S90429A</td>
                <td class="xl70">S92819A</td>
                <td class="xl70">S971XXA</td>
                <td class="xl70">T2500XA</td>
                <td class="xl70">S9310XA</td>
                <td class="xl70">S93609A</td>
                <td class="xl70">S96919A</td>
                <td class="xl70">L03116</td>
                <td class="xl75">　</td>
                <td class="xl70">　</td>
            </tr>
            <tr height="23">
                <td class="xl68" height="23">腳趾</td>
                <td class="xl70">S90119A</td>
                <td class="xl70">S91319A</td>
                <td class="xl70">S90129A</td>
                <td class="xl70">S92509A</td>
                <td class="xl70">S972XXA</td>
                <td class="xl70">T2500XA</td>
                <td class="xl70">S93509A</td>
                <td class="xl70">S938X9A</td>
                <td class="xl70">S96119A</td>
                <td class="xl70">M25579</td>
                <td class="xl75">　</td>
                <td class="xl70">　</td>
            </tr>
            <tr height="23">
                <td class="xl68" height="23">會陰</td>
                <td class="xl70">S30819A</td>
                <td class="xl70">S3141XA</td>
                <td class="xl70">S3020XA</td>
                <td class="xl70">　</td>
                <td class="xl70">S376XXA</td>
                <td class="xl70">T2100XA</td>
                <td class="xl70">　</td>
                <td class="xl70">S339XXA</td>
                <td class="xl70">　</td>
                <td class="xl70">L03314</td>
                <td class="xl75">　</td>
                <td class="xl70">　</td>
            </tr>
        </tbody>
    </table>
</div>

<div class="content hidden" id="Trauma_System">
    <div class="container">
        <h1>外傷圖譜系統</h1>
        
        <div class="trauma-main-content">
            <div>
                <h3>身體部位選擇</h3>
                
                <div class="view-selector">
                    <button class="view-button active" onclick="switchView('front')">正面</button>
                    <button class="view-button" onclick="switchView('back')">背面</button>
                </div>
                
                <!-- 正面視圖 -->
                <div class="diagram-container front-view active" id="front-diagram">
                    <div class="body-diagram">
                        <div class="body-part head" data-part="頭部" data-english="head">頭部</div>
                        <div class="body-part neck" data-part="頸部" data-english="neck">頸部</div>
                        <div class="body-part chest" data-part="胸部" data-english="chest">胸部</div>
                        <div class="body-part abdomen" data-part="腹部" data-english="abdomen">腹部</div>
                        <div class="body-part pelvis" data-part="會陰部" data-english="perineum">會陰部</div>
                        <div class="body-part left-arm" data-part="左上肢" data-english="left upper limb">左上肢</div>
                        <div class="body-part right-arm" data-part="右上肢" data-english="right upper limb">右上肢</div>
                        <div class="body-part left-leg" data-part="左下肢" data-english="left lower limb">左下肢</div>
                        <div class="body-part right-leg" data-part="右下肢" data-english="right lower limb">右下肢</div>
                    </div>
                </div>
                
                <!-- 背面視圖 -->
                <div class="diagram-container back-view" id="back-diagram">
                    <div class="body-diagram">
                        <div class="body-part head" data-part="頭部" data-english="head">頭部</div>
                        <div class="body-part neck" data-part="頸部" data-english="neck">頸部</div>
                        <div class="body-part upper-back" data-part="上背部" data-english="upper back">上背部</div>
                        <div class="body-part lower-back" data-part="下背部" data-english="lower back">下背部</div>
                        <div class="body-part spine" data-part="脊椎" data-english="spine">脊椎</div>
                        <div class="body-part buttocks" data-part="臀部" data-english="buttocks">臀部</div>
                        <div class="body-part left-arm" data-part="左上肢" data-english="left upper limb">左上肢</div>
                        <div class="body-part right-arm" data-part="右上肢" data-english="right upper limb">右上肢</div>
                        <div class="body-part left-leg" data-part="左下肢" data-english="left lower limb">左下肢</div>
                        <div class="body-part right-leg" data-part="右下肢" data-english="right lower limb">右下肢</div>
                    </div>
                </div>
            </div>
            
            <div>
                <div class="sub-part-selector" id="sub-part-selector">
                    <button class="back-button" onclick="hideSubParts()">← 返回</button>
                    <h3 id="selected-main-part-title">選擇細部位置</h3>
                    <div class="sub-parts" id="sub-parts"></div>
                </div>
                
                <div class="injury-selector" id="injury-selector">
                    <button class="back-button" onclick="backToSubParts()">← 返回</button>
                    <h3 id="selected-part-title">選擇外傷類型</h3>
                    <div class="injury-types" id="injury-types"></div>
                </div>
                
                <div class="selected-injuries">
                    <h3>已登記外傷：</h3>
                    <div id="injury-list">
                        <p>尚未選擇任何外傷</p>
                    </div>
                </div>
                
                <button class="generate-report" onclick="generateReport()">產生診斷</button>
                <button class="clear-report" onclick="clearReport()">清除</button>

                <div class="report-output" id="report-output"></div>
            </div>
        </div>
    </div>
</div>

</div>

    <script>
        const subPartDatabase = {
            '頭部': [
                { part: '頭部', english: 'head' },
                { part: '臉部', english: 'face' },
                { part: '前額', english: 'forehead' },
                { part: '眼部', english: 'eye' },
                { part: '鼻部', english: 'nose' },
                { part: '耳部', english: 'ear' },
                { part: '臉頰', english: 'cheek' },
                { part: '口部', english: 'mouth' },
                { part: '下顎', english: 'jaw' },
                { part: '下巴', english: 'chin' }
            ],
            '左上肢': [
                { part: '左肩', english: 'left shoulder' },
                { part: '左上臂', english: 'left upper arm' },
                { part: '左肘部', english: 'left elbow' },
                { part: '左前臂', english: 'left forearm' },
                { part: '左手腕', english: 'left wrist' },
                { part: '左手掌', english: 'left hand' },
                { part: '左手指', english: 'left fingers' }
            ],
            '右上肢': [
                { part: '右肩', english: 'right shoulder' },
                { part: '右上臂', english: 'right upper arm' },
                { part: '右肘部', english: 'right elbow' },
                { part: '右前臂', english: 'right forearm' },
                { part: '右手腕', english: 'right wrist' },
                { part: '右手掌', english: 'right hand' },
                { part: '右手指', english: 'right fingers' }
            ],
            '左下肢': [
                { part: '左髖部', english: 'left hip' },
                { part: '左大腿', english: 'left thigh' },
                { part: '左膝', english: 'left knee' },
                { part: '左小腿', english: 'left lower leg' },
                { part: '左踝', english: 'left ankle' },
                { part: '左足部', english: 'left foot' },
                { part: '左腳趾', english: 'left toes' }
            ],
            '右下肢': [
                { part: '右髖部', english: 'right hip' },
                { part: '右大腿', english: 'right thigh' },
                { part: '右膝', english: 'right knee' },
                { part: '右小腿', english: 'right lower leg' },
                { part: '右踝', english: 'right ankle' },
                { part: '右足部', english: 'right foot' },
                { part: '右腳趾', english: 'right toes' }
            ],
            '脊椎': [
                { part: '頸椎', english: 'cervical spine' },
                { part: '胸椎', english: 'thoracic spine' },
                { part: '腰椎', english: 'lumbar spine' },
                { part: '薦椎', english: 'sacral spine' },
                { part: '尾椎', english: 'coccyx' }
            ]
        };


        const injuryDatabase = {
            '頸部': [
                { type: 'A/W', icd: 'S10.11XA', english: 'abrasion/wound of neck', chinese: '頸部擦傷' },
                { type: 'L/W', icd: 'S11.90XA', english: 'laceration/wound of neck', chinese: '頸部撕裂傷' },
                { type: 'Contusion', icd: 'S10.93', english: 'contusion of neck', chinese: '頸部挫傷' },
                { type: 'Strain', icd: 'S16.1XXA', english: 'strain of neck', chinese: '頸部拉傷' }
            ],
            '胸部': [
                { type: 'A/W', icd: 'S20419A', english: 'abrasion/wound of chest', chinese: '胸部擦傷' },
                { type: 'L/W', icd: 'S21119A', english: 'laceration/wound of chest', chinese: '胸部撕裂傷' },
                { type: 'Contusion', icd: 'S20219A', english: 'contusion of chest', chinese: '胸部挫傷' },
                { type: 'Fracture', icd: '一肋S2239XA/多肋S2249XA/胸S22.20XA', english: 'fracture of rib/sternum', chinese: '肋骨/胸骨骨折' },
                { type: 'Crush', icd: 'S280XXA', english: 'crushing injury of chest', chinese: '胸部壓砸傷' },
                { type: 'Burn', icd: 'T2101XA', english: 'burn of trunk', chinese: '軀幹燒傷' },
                { type: 'Strain', icd: 'S29011A', english: 'strain of chest', chinese: '胸部肌肉拉傷' }
            ],
            '腹部': [
                { type: 'A/W', icd: 'S30811A', english: 'abrasion/wound of abdomen', chinese: '腹部擦傷' },
                { type: 'L/W', icd: 'S31119A', english: 'laceration/wound of abdomen', chinese: '腹部撕裂傷' },
                { type: 'Contusion', icd: 'S301XXA', english: 'contusion of abdomen', chinese: '腹部挫傷' },
                { type: 'Crush', icd: 'S381XXA', english: 'crushing injury of abdomen', chinese: '腹部壓砸傷' },
                { type: 'Burn', icd: 'T2102XA', english: 'burn of abdomen', chinese: '腹部燒傷' },
                { type: 'Strain', icd: 'S39011A', english: 'strain of abdomen', chinese: '腹部肌肉拉傷' },
            ],
            '會陰部': [
                { type: 'A/W', icd: 'S30812A', english: 'abrasion/wound of perineum', chinese: '會陰部擦傷' },
                { type: 'L/W', icd: '男S3121XA/囊S3131XA/女S3141XA', english: 'laceration/wound of perineum', chinese: '會陰部撕裂傷' },
                { type: 'Contusion', icd: 'S3021XA', english: 'contusion of perineum', chinese: '會陰部挫傷' },
                { type: 'Burn', icd: '男T2106XA/女T2107XA', english: 'burn of perineum', chinese: '會陰部燒傷' },
                { type: 'Fracture', icd: '穩定骨盆S32810A/不穩定S32811A', english: 'fracture of pelvis(iliac/ischial/pubic bone/acetabular)', chinese: '骨盆骨折(髂骨/坐骨/恥骨/髖臼)' },
            ],
            '上背部': [
                { type: 'A/W', icd: 'S20419A', english: 'abrasion/wound of upper back', chinese: '上背部擦傷' },
                { type: 'L/W', icd: 'S21219A', english: 'laceration/wound of upper back', chinese: '上背部撕裂傷' },
                { type: 'Contusion', icd: 'S20229A', english: 'contusion of upper back', chinese: '上背部挫傷' },
                { type: 'Burn', icd: 'T2103XA', english: 'burn of upper back', chinese: '上背部燒傷' },
                { type: 'Crush', icd: 'S280XXA', english: 'crush injury of upper back', chinese: '上背部壓砸傷' },
                { type: 'Strain', icd: 'S29012A', english: 'strain of upper back muscles', chinese: '上背部肌肉拉傷' },
                { type: 'Sprain', icd: 'S239XXA', english: 'sprain of upper back ligaments', chinese: '上背部韌帶扭傷' }
            ],
            '下背部': [
                { type: 'A/W', icd: 'S30810A', english: 'abrasion/wound of lower back', chinese: '下背部擦傷' },
                { type: 'L/W', icd: 'S31010A', english: 'laceration/wound of lower back', chinese: '下背部撕裂傷' },
                { type: 'Contusion', icd: 'S300XXA', english: 'contusion of lower back', chinese: '下背部挫傷' },
                { type: 'Burn', icd: 'T2104XA', english: 'burn of lower back', chinese: '下背部燒傷' },
                { type: 'Crush', icd: 'S381XXA', english: 'crush injury of lower back', chinese: '下背部壓砸傷' },
                { type: 'Strain', icd: 'M545', english: 'strain of lower back muscles', chinese: '下背部肌肉拉傷' },
                { type: 'Sprain', icd: 'S39012A', english: 'sprain of lower back ligaments', chinese: '下背部韌帶扭傷' }
            ],
            '臀部': [
                { type: 'A/W', icd: 'S30.810A', english: 'abrasion/wound of buttock', chinese: '臀部擦傷' },
                { type: 'L/W', icd: 'S31.801A', english: 'laceration/wound of buttock', chinese: '臀部撕裂傷' },
                { type: 'Contusion', icd: 'S30.0XXA', english: 'contusion of buttock', chinese: '臀部挫傷' },
                { type: 'Burn', icd: 'T21.05XA', english: 'burn of buttock', chinese: '臀部燒傷' },
                { type: 'Fracture', icd: '穩定骨盆S32810A/不穩定S32811A', english: 'fracture of pelvis(iliac/ischial/pubic bone/acetabular)', chinese: '骨盆骨折(髂骨/坐骨/恥骨/髖臼)' },
            ],
            '頸椎': [
                { type: 'Fracture', icd: 'S12.9XXA', english: 'fracture of cervical vertebra', chinese: '頸椎骨折' },
            ],
            '胸椎': [
                { type: 'Fracture', icd: 'S22.000A', english: 'fracture of thoracic vertebra', chinese: '胸椎骨折' },
            ],
            '腰椎': [
                { type: 'Fracture', icd: 'S32.000A', english: 'fracture of lumbar vertebra', chinese: '腰椎骨折' },
            ],
            '薦椎': [
                { type: 'Fracture', icd: 'S32.10XA', english: 'fracture of sacrum', chinese: '薦椎骨折' },
            ],
            '尾椎': [
                { type: 'Fracture', icd: 'S32.2XXA', english: 'fracture of coccyx', chinese: '尾椎骨折' },
                { type: 'Burn', icd: 'T21.05XA', english: 'burn of coccyx', chinese: '尾椎燒傷' },
                { type: 'Dislocation', icd: 'S33.2XXA', english: 'dislocation of coccyx', chinese: '尾椎脫位' }
            ],
            '肩胛骨': [
                { type: 'Fracture', icd: 'S42.109A', english: 'fracture of scapula', chinese: '肩胛骨骨折' },
            ],
            '頭部': [
                { type: 'A/W', icd: 'S0001XA', english: 'abrasion/wound of head', chinese: '頭部擦傷' },
                { type: 'Fracture', icd: 'S0291XA', english: 'fracture of skull', chinese: '顱骨骨折' },
                { type: 'L/W', icd: 'S0101XA', english: 'laceration/wound of head', chinese: '頭部撕裂傷' },
                { type: 'Contusion', icd: 'S0093XA', english: 'contusion of head', chinese: '頭部挫傷' },
                { type: 'Burn', icd: 'T2009XA', english: 'burn of head', chinese: '頭部燒傷' }, 
                { type: 'Concussion', icd: 'S060X9A', english: 'concussion', chinese: '腦震盪' }, 
                { type: 'ICH', icd: 'S06369A', english: 'ICH of frontal/parietal/temporal/occipital lobe/basal ganglia/thalamus/internal capsule/brainstem/cerebellum', chinese: '腦內出血' }, 
                { type: 'SDH', icd: 'S065X9A', english: 'SDH of frontal/parietal/temporal/occipital lobe', chinese: '硬腦膜下出血' }, 
                { type: 'SAH', icd: 'S066X9A', english: 'SAH', chinese: '蜘蛛膜下腔出血' }, 
                { type: 'EDH', icd: 'S064X9A', english: 'EDH of frontal/parietal/temporal/occipital lobe', chinese: '硬腦膜外出血' }, 
            ],
            '前額': [
                { type: 'A/W', icd: 'S0001XA', english: 'abrasion/wound of forehead', chinese: '前額擦傷' },
                { type: 'L/W', icd: 'S0101XA', english: 'laceration/wound of forehead', chinese: '前額撕裂傷' },
                { type: 'Contusion', icd: 'S0093XA', english: 'contusion of forehead', chinese: '前額挫傷' },
                { type: 'Burn', icd: 'T2009XA', english: 'burn of forehead', chinese: '前額燒傷' },
            ],
            '臉部': [
                { type: 'A/W', icd: 'S0081XA', english: 'abrasion/wound of face', chinese: '臉部擦傷' },
                { type: 'L/W', icd: 'S01419A', english: 'laceration/wound of face', chinese: '臉部撕裂傷' },
                { type: 'Contusion', icd: 'S0993XA', english: 'contusion of face', chinese: '臉部挫傷' },
                { type: 'Fracture', icd: 'S0292XA', english: 'fracture of facial bones', chinese: '顏面骨骨折' },
                { type: 'Crush', icd: 'S070XXA', english: 'crush injury of face', chinese: '臉部壓砸傷' },
                { type: 'Burn', icd: 'T2009XA', english: 'burn of face', chinese: '臉部燒傷' },
            ],
            '眼部': [
                { type: 'A/W', icd: 'S00.211A', english: 'abrasion/wound of eyelid', chinese: '眼瞼擦傷' },
                { type: 'L/W', icd: 'S01.112A', english: 'laceration/wound of eyelid', chinese: '眼瞼撕裂傷' },
                { type: 'Contusion', icd: 'S00.10XA', english: 'contusion of eyelid', chinese: '眼瞼挫傷' },
                { type: 'Fracture', icd: 'S02.85XA', english: 'orbital fracture', chinese: '眼眶骨折' }
            ],
            '鼻部': [
                { type: 'A/W', icd: 'S0031XA', english: 'abrasion/wound of nose', chinese: '鼻部擦傷' },
                { type: 'L/W', icd: 'S0121XA', english: 'laceration/wound of nose', chinese: '鼻部撕裂傷' },
                { type: 'Contusion', icd: 'S0033XA', english: 'contusion of nose', chinese: '鼻部挫傷' },
                { type: 'Fracture', icd: 'S022XA', english: 'fracture of nasal bones', chinese: '鼻骨骨折' },
                { type: 'Burn', icd: 'T2004XA', english: 'burn of nose', chinese: '鼻部燒傷' }
            ],
            '耳部': [
                { type: 'A/W', icd: 'S00149A', english: 'abrasion/wound of ear', chinese: '耳部擦傷' },
                { type: 'L/W', icd: 'S00149A', english: 'laceration/wound of ear', chinese: '耳部撕裂傷' },
                { type: 'Contusion', icd: 'S00439A', english: 'contusion of ear', chinese: '耳部挫傷' },
                { type: 'Burn', icd: 'T20019A', english: 'burn of ear', chinese: '耳部燒傷' },
            ],
            '口部': [
                { type: 'A/W', icd: 'S00512A', english: 'abrasion/wound of lip', chinese: '唇部擦傷' },
                { type: 'L/W', icd: 'S01511A', english: 'laceration/wound of lip', chinese: '唇部撕裂傷' },
                { type: 'Contusion', icd: 'S00532A', english: 'contusion of lip', chinese: '唇部挫傷' },
                { type: 'Burn', icd: 'T280XXA', english: 'burn of lip', chinese: '唇部燒傷' },
            ],
            '臉頰': [
                { type: 'A/W', icd: 'S0081XA', english: 'abrasion/wound of cheek', chinese: '臉頰擦傷' },
                { type: 'L/W', icd: 'S01419A', english: 'laceration/wound of cheek', chinese: '臉頰撕裂傷' },
                { type: 'Contusion', icd: 'S0993XA', english: 'contusion of cheek', chinese: '臉頰挫傷' },
                { type: 'Fracture', icd: 'S02.4', english: 'fracture of zygomatic bone', chinese: '顴骨骨折' },
                { type: 'Burn', icd: 'T2009XA', english: 'burn of cheek', chinese: '臉頰燒傷' }
            ],
            '下顎': [
                { type: 'A/W', icd: 'S0081XA', english: 'abrasion/wound of jaw', chinese: '下顎擦傷' },
                { type: 'L/W', icd: 'S01419A', english: 'laceration/wound of jaw', chinese: '下顎撕裂傷' },
                { type: 'Contusion', icd: 'S0993XA', english: 'contusion of jaw', chinese: '下顎挫傷' },
                { type: 'Fracture', icd: 'S02.6', english: 'fracture of mandible', chinese: '下顎骨骨折' },
                { type: 'Dislocation', icd: 'S03.0', english: 'dislocation of jaw', chinese: '下顎脫位' },
                { type: 'Burn', icd: 'T2009XA', english: 'burn of jaw', chinese: '下顎燒傷' }
            ],
            '下巴': [
                { type: 'A/W', icd: 'S0081XA', english: 'abrasion/wound of chin', chinese: '下巴擦傷' },
                { type: 'L/W', icd: 'S01419A', english: 'laceration/wound of chin', chinese: '下巴撕裂傷' },
                { type: 'Contusion', icd: 'S0993XA', english: 'contusion of chin', chinese: '下巴挫傷' },
                { type: 'Burn', icd: 'T2009XA', english: 'burn of chin', chinese: '下巴燒傷' }
            ],
            '左肩': [
                { type: 'A/W', icd: 'S40219A', english: 'abrasion/wound of left shoulder', chinese: '左肩擦傷' },
                { type: 'L/W', icd: 'S41019A', english: 'laceration/wound of left shoulder', chinese: '左肩撕裂傷' },
                { type: 'Contusion', icd: 'S40019A', english: 'contusion of left shoulder', chinese: '左肩挫傷' },
                { type: 'Fracture', icd: 'S42009A', english: 'fracture of left clavicle', chinese: '左鎖骨骨折' },
                { type: 'Dislocation', icd: 'S43006A', english: 'dislocation of left shoulder', chinese: '左肩脫位' },
                { type: 'Sprain', icd: 'S43409A', english: 'sprain of left shoulder', chinese: '左肩扭傷' },
                { type: 'Strain', icd: 'S46019A', english: 'strain of left shoulder', chinese: '左肩拉傷' }
            ],
            '右肩': [
                { type: 'A/W', icd: 'S40219A', english: 'abrasion/wound of right shoulder', chinese: '右肩擦傷' },
                { type: 'L/W', icd: 'S41019A', english: 'laceration/wound of right shoulder', chinese: '右肩撕裂傷' },
                { type: 'Contusion', icd: 'S40019A', english: 'contusion of right shoulder', chinese: '右肩挫傷' },
                { type: 'Fracture', icd: 'S42009A', english: 'fracture of right clavicle', chinese: '右鎖骨骨折' },
                { type: 'Dislocation', icd: 'S43006A', english: 'dislocation of right shoulder', chinese: '右肩脫位' },
                { type: 'Sprain', icd: 'S43409A', english: 'sprain of right shoulder', chinese: '右肩扭傷' },
                { type: 'Strain', icd: 'S46019A', english: 'strain of right shoulder', chinese: '右肩拉傷' }
            ],
            '左上臂': [
                { type: 'A/W', icd: 'S40819A', english: 'abrasion/wound of left upper arm', chinese: '左上臂擦傷' },
                { type: 'L/W', icd: 'S41109A', english: 'laceration/wound of left upper arm', chinese: '左上臂撕裂傷' },
                { type: 'Contusion', icd: 'S40029A', english: 'contusion of left upper arm', chinese: '左上臂挫傷' },
                { type: 'Fracture', icd: 'S42209A', english: 'fracture of left humerus', chinese: '左肱骨骨折' },
                { type: 'Crush', icd: 'S479XXA', english: 'crush injury of left upper arm', chinese: '左上臂壓砸傷' },
                { type: 'Burn', icd: 'T22039A', english: 'burn of left upper arm', chinese: '左上臂燒傷' },
                { type: 'Strain', icd: 'S46919A', english: 'strain of left upper arm', chinese: '左上臂拉傷' },
            ],
            '右上臂': [
                { type: 'A/W', icd: 'S40819A', english: 'abrasion/wound of right upper arm', chinese: '右上臂擦傷' },
                { type: 'L/W', icd: 'S41109A', english: 'laceration/wound of right upper arm', chinese: '右上臂撕裂傷' },
                { type: 'Contusion', icd: 'S40029A', english: 'contusion of right upper arm', chinese: '右上臂挫傷' },
                { type: 'Fracture', icd: 'S42209A', english: 'fracture of right humerus', chinese: '右肱骨骨折' },
                { type: 'Crush', icd: 'S479XXA', english: 'crush injury of right upper arm', chinese: '右上臂壓砸傷' },
                { type: 'Burn', icd: 'T22039A', english: 'burn of right upper arm', chinese: '右上臂燒傷' },
                { type: 'Strain', icd: 'S46919A', english: 'strain of right upper arm', chinese: '右上臂拉傷' },
            ],
            '左肘部': [
                { type: 'A/W', icd: 'S50319A', english: 'abrasion/wound of left elbow', chinese: '左肘擦傷' },
                { type: 'L/W', icd: 'S51019A', english: 'laceration/wound of left elbow', chinese: '左肘撕裂傷' },
                { type: 'Contusion', icd: 'S5000XA', english: 'contusion of left elbow', chinese: '左肘挫傷' },
                { type: 'Crush', icd: 'S5700XA', english: 'crush injury of left elbow', chinese: '左肘壓砸傷' },
                { type: 'Burn', icd: 'T22029A', english: 'burn of left elbow', chinese: '左肘部燒傷' },
                { type: 'Fracture', icd: '橈S52109A/尺S52009A', english: 'fracture of left radius/ulna', chinese: '左橈骨/尺骨骨折' },
                { type: 'Dislocation', icd: 'S53006A', english: 'dislocation of left elbow', chinese: '左肘脫位' },
                { type: 'Sprain', icd: 'S53409A', english: 'sprain of left elbow', chinese: '左肘扭傷' }
            ],
            '右肘部': [
                { type: 'A/W', icd: 'S50319A', english: 'abrasion/wound of right elbow', chinese: '右肘擦傷' },
                { type: 'L/W', icd: 'S51019A', english: 'laceration/wound of right elbow', chinese: '右肘撕裂傷' },
                { type: 'Contusion', icd: 'S5000XA', english: 'contusion of right elbow', chinese: '右肘挫傷' },
                { type: 'Crush', icd: 'S5700XA', english: 'crush injury of right elbow', chinese: '右肘壓砸傷' },
                { type: 'Burn', icd: 'T22029A', english: 'burn of right elbow', chinese: '右肘燒傷' },
                { type: 'Fracture', icd: '橈S52109A/尺S52009A', english: 'fracture of right radius/ulna', chinese: '右橈骨/尺骨骨折' },
                { type: 'Dislocation', icd: 'S53006A', english: 'dislocation of right elbow', chinese: '右肘脫位' },
                { type: 'Sprain', icd: 'S53409A', english: 'sprain of right elbow', chinese: '右肘扭傷' }            
            ],
            '左前臂': [
                { type: 'A/W', icd: 'S50819A', english: 'abrasion/wound of left forearm', chinese: '左前臂擦傷' },
                { type: 'L/W', icd: 'S51819A', english: 'laceration/wound of left forearm', chinese: '左前臂撕裂傷' },
                { type: 'Contusion', icd: 'S5010XA', english: 'contusion of left forearm', chinese: '左前臂挫傷' },
                { type: 'Fracture', icd: '橈S52509A/尺S52609A', english: 'fracture of left distal radius/ulna', chinese: '左遠端橈骨/尺骨骨折' },
                { type: 'Crush', icd: 'S5780XA', english: 'crush injury of left forearm', chinese: '左前臂壓砸傷' },
                { type: 'Burn', icd: 'T22019A', english: 'burn of left forearm', chinese: '左前臂燒傷' },
                { type: 'Strain', icd: 'S56919A', english: 'strain of left forearm', chinese: '左前臂拉傷' },
            ],
            '右前臂': [
                { type: 'A/W', icd: 'S50819A', english: 'abrasion/wound of right forearm', chinese: '右前臂擦傷' },
                { type: 'L/W', icd: 'S51819A', english: 'laceration/wound of right forearm', chinese: '右前臂撕裂傷' },
                { type: 'Contusion', icd: 'S5010XA', english: 'contusion of right forearm', chinese: '右前臂挫傷' },
                { type: 'Fracture', icd: '橈S52509A/尺S52609A', english: 'fracture of right distal radius/ulna', chinese: '右遠端橈骨/尺骨骨折' },
                { type: 'Crush', icd: 'S5780XA', english: 'crush injury of right forearm', chinese: '右前臂壓砸傷' },
                { type: 'Burn', icd: 'T22019A', english: 'burn of right forearm', chinese: '右前臂燒傷' },
                { type: 'Strain', icd: 'S56919A', english: 'strain of right forearm', chinese: '右前臂拉傷' },
            ],
            '左手腕': [
                { type: 'A/W', icd: 'S60819A', english: 'abrasion/wound of left wrist', chinese: '左手腕擦傷' },
                { type: 'L/W', icd: 'S61519A', english: 'laceration/wound of left wrist', chinese: '左手腕撕裂傷' },
                { type: 'Contusion', icd: 'S60219A', english: 'contusion of left wrist', chinese: '左手腕挫傷' },
                { type: 'Fracture', icd: 'S62109A', english: 'fracture of left wrist', chinese: '左手腕骨折' },
                { type: 'Sprain', icd: 'S63509A', english: 'sprain of left wrist', chinese: '左手腕扭傷' },
                { type: 'Crush', icd: 'S6730XA', english: 'crush injury of left wrist', chinese: '左手腕壓砸傷' },
                { type: 'Burn', icd: 'T23079A', english: 'burn of left wrist', chinese: '左手腕燒傷' },
                { type: 'Dislocation', icd: 'S63006A', english: 'dislocation of left wrist', chinese: '左手腕脫位' }
            ],
            '右手腕': [
                { type: 'A/W', icd: 'S60819A', english: 'abrasion/wound of right wrist', chinese: '右手腕擦傷' },
                { type: 'L/W', icd: 'S61519A', english: 'laceration/wound of right wrist', chinese: '右手腕撕裂傷' },
                { type: 'Contusion', icd: 'S60219A', english: 'contusion of right wrist', chinese: '右手腕挫傷' },
                { type: 'Fracture', icd: 'S62109A', english: 'fracture of right wrist', chinese: '右手腕骨折' },
                { type: 'Sprain', icd: 'S63509A', english: 'sprain of right wrist', chinese: '右手腕扭傷' },
                { type: 'Crush', icd: 'S6730XA', english: 'crush injury of right wrist', chinese: '右手腕壓砸傷' },
                { type: 'Burn', icd: 'T23079A', english: 'burn of right wrist', chinese: '右手腕燒傷' },
                { type: 'Dislocation', icd: 'S63006A', english: 'dislocation of right wrist', chinese: '右手腕脫位' }
            ],
            '左手掌': [
                { type: 'A/W', icd: 'S60519A', english: 'abrasion/wound of left hand', chinese: '左手掌擦傷' },
                { type: 'L/W', icd: 'S61419A', english: 'laceration/wound of left hand', chinese: '左手掌撕裂傷' },
                { type: 'Contusion', icd: 'S60229A', english: 'contusion of left hand', chinese: '左手掌挫傷' },
                { type: 'Crush', icd: 'S6720XA', english: 'crush injury of left hand', chinese: '左手掌壓砸傷' },
                { type: 'Fracture', icd: 'S62399A', english: 'fracture of left metacarpal bone fracture', chinese: '左掌骨骨折' },
                { type: 'Burn', icd: 'T23009A', english: 'burn of left hand', chinese: '左手掌燒傷' },
                { type: 'Sprain', icd: 'S638X9A', english: 'sprain of left hand', chinese: '左手掌扭傷' },
                { type: 'Strain', icd: 'S66919A', english: 'strain of left hand', chinese: '左手掌拉傷' }
            ],
            '右手掌': [
                { type: 'A/W', icd: 'S60519A', english: 'abrasion/wound of right hand', chinese: '右手掌擦傷' },
                { type: 'L/W', icd: 'S61419A', english: 'laceration/wound of right hand', chinese: '右手掌撕裂傷' },
                { type: 'Contusion', icd: 'S60229A', english: 'contusion of right hand', chinese: '右手掌挫傷' },
                { type: 'Crush', icd: 'S6720XA', english: 'crush injury of right hand', chinese: '右手掌壓砸傷' },
                { type: 'Fracture', icd: 'S62399A', english: 'fracture of right metacarpal bone fracture', chinese: '右掌骨骨折' },
                { type: 'Burn', icd: 'T23009A', english: 'burn of right hand', chinese: '右手掌燒傷' },
                { type: 'Sprain', icd: 'S638X9A', english: 'sprain of right hand', chinese: '右手掌扭傷' },
                { type: 'Strain', icd: 'S66919A', english: 'strain of right hand', chinese: '右手掌拉傷' }
            ],
            '左手指': [
                { type: 'A/W', icd: 'S60419A', english: 'abrasion/wound of left finger', chinese: '左手指擦傷' },
                { type: 'L/W', icd: 'S61219A', english: 'laceration/wound of left finger', chinese: '左手指撕裂傷' },
                { type: 'Contusion', icd: 'S6000XA', english: 'contusion of left finger', chinese: '左手指挫傷' },
                { type: 'Burn', icd: 'T23049A', english: 'burn of left finger', chinese: '左手指燒傷' },
                { type: 'Crush', icd: 'S6720XA', english: 'crush injury of left finger', chinese: '左手指壓砸傷' },
                { type: 'Fracture', icd: 'S62609A', english: 'fracture of left finger', chinese: '左手指骨折' },
                { type: 'Dislocation', icd: 'S63259A', english: 'dislocation of left finger', chinese: '左手指脫位' },
                { type: 'Sprain', icd: 'S63619A', english: 'sprain of left finger', chinese: '左手指扭傷' },
                { type: 'Strain', icd: 'S66519A', english: 'strain of left finger', chinese: '左手指拉傷' }
            ],
            '右手指': [
                { type: 'A/W', icd: 'S60419A', english: 'abrasion/wound of right finger', chinese: '右手指擦傷' },
                { type: 'L/W', icd: 'S61219A', english: 'laceration/wound of right finger', chinese: '右手指撕裂傷' },
                { type: 'Contusion', icd: 'S6000XA', english: 'contusion of right finger', chinese: '右手指挫傷' },
                { type: 'Burn', icd: 'T23049A', english: 'burn of right finger', chinese: '右手指燒傷' },
                { type: 'Crush', icd: 'S6720XA', english: 'crush injury of right finger', chinese: '右手指壓砸傷' },
                { type: 'Fracture', icd: 'S62609A', english: 'fracture of right finger', chinese: '右手指骨折' },
                { type: 'Dislocation', icd: 'S63259A', english: 'dislocation of right finger', chinese: '右手指脫位' },
                { type: 'Sprain', icd: 'S63619A', english: 'sprain of right finger', chinese: '右手指扭傷' },
                { type: 'Strain', icd: 'S66519A', english: 'strain of right finger', chinese: '右手指拉傷' }
            ],
            '左髖部': [
                { type: 'A/W', icd: 'S70219A', english: 'abrasion/wound of left hip', chinese: '左髖部擦傷' },
                { type: 'L/W', icd: 'S71019A', english: 'laceration/wound of left hip', chinese: '左髖部撕裂傷' },
                { type: 'Contusion', icd: 'S7000XA', english: 'contusion of left hip', chinese: '左髖部挫傷' },
                { type: 'Fracture', icd: 'M84359A', english: 'fracture of left hip(femoral neck/head/intertrochanteric/subtrochanteric)', chinese: '左髖部骨折(股骨頸/股骨頭/轉子間/轉子下)' },
                { type: 'Crush', icd: 'S7700XA', english: 'crush injury of left hip', chinese: '左髖部壓砸傷' },
                { type: 'Dislocation', icd: 'S73006A', english: 'dislocation of left hip', chinese: '左髖部脫位' },
                { type: 'Sprain', icd: 'S73109A', english: 'sprain of left hip', chinese: '左髖部扭傷' },
                { type: 'Strain', icd: 'S76019A', english: 'strain of left hip', chinese: '左髖部拉傷' }
            ],
            '右髖部': [
                { type: 'A/W', icd: 'S70219A', english: 'abrasion/wound of right hip', chinese: '右髖部擦傷' },
                { type: 'L/W', icd: 'S71019A', english: 'laceration/wound of right hip', chinese: '右髖部撕裂傷' },
                { type: 'Contusion', icd: 'S7000XA', english: 'contusion of right hip', chinese: '右髖部挫傷' },
                { type: 'Fracture', icd: 'M84359A', english: 'fracture of right hip(femoral neck/head/intertrochanteric/subtrochanteric)', chinese: '右髖部骨折(股骨頸/股骨頭/轉子間/轉子下)' },
                { type: 'Crush', icd: 'S7700XA', english: 'crush injury of right hip', chinese: '右髖部壓砸傷' },
                { type: 'Dislocation', icd: 'S73006A', english: 'dislocation of right hip', chinese: '右髖部脫位' },
                { type: 'Sprain', icd: 'S73109A', english: 'sprain of right hip', chinese: '右髖部扭傷' },
                { type: 'Strain', icd: 'S76019A', english: 'strain of right hip', chinese: '右髖部拉傷' }
            ],
            '左大腿': [
                { type: 'A/W', icd: 'S70319A', english: 'abrasion/wound of left thigh', chinese: '左大腿擦傷' },
                { type: 'L/W', icd: 'S71119A', english: 'laceration/wound of left thigh', chinese: '左大腿撕裂傷' },
                { type: 'Contusion', icd: 'S7010XA', english: 'contusion of left thigh', chinese: '左大腿挫傷' },
                { type: 'Fracture', icd: 'S7290XA', english: 'fracture of left femur', chinese: '左股骨骨折' },
                { type: 'Crush', icd: 'S7710XA', english: 'crush injury of left thigh', chinese: '左大腿壓砸傷' },
                { type: 'Burn', icd: 'T24019A', english: 'burn of left thigh', chinese: '左大腿燒傷' },
                { type: 'Sprain', icd: 'S73119A', english: 'sprain of left thigh', chinese: '左大腿扭傷' },
                { type: 'Strain', icd: 'S76219A', english: 'strain of left thigh', chinese: '左大腿拉傷' }
            ],
            '右大腿': [
                { type: 'A/W', icd: 'S70319A', english: 'abrasion/wound of right thigh', chinese: '右大腿擦傷' },
                { type: 'L/W', icd: 'S71119A', english: 'laceration/wound of right thigh', chinese: '右大腿撕裂傷' },
                { type: 'Contusion', icd: 'S7010XA', english: 'contusion of right thigh', chinese: '右大腿挫傷' },
                { type: 'Fracture', icd: 'S7290XA', english: 'fracture of right femur', chinese: '右股骨骨折' },
                { type: 'Crush', icd: 'S7710XA', english: 'crush injury of right thigh', chinese: '右大腿壓砸傷' },
                { type: 'Burn', icd: 'T24019A', english: 'burn of right thigh', chinese: '右大腿燒傷' },
                { type: 'Sprain', icd: 'S73119A', english: 'sprain of right thigh', chinese: '右大腿扭傷' },
                { type: 'Strain', icd: 'S76219A', english: 'strain of right thigh', chinese: '右大腿拉傷' }
            ],
            '左膝': [
                { type: 'A/W', icd: 'S80219A', english: 'abrasion/wound of left knee', chinese: '左膝擦傷' },
                { type: 'L/W', icd: 'S81019A', english: 'laceration/wound of left knee', chinese: '左膝撕裂傷' },
                { type: 'Contusion', icd: 'S8000XA', english: 'contusion of left knee', chinese: '左膝挫傷' },
                { type: 'Fracture', icd: '髕S82009A/上脛S82109A', english: 'fracture of left patella/proximal tibia', chinese: '左髕骨/脛骨上端骨折' },
                { type: 'Crush', icd: 'S8700XA', english: 'crush injury of left knee', chinese: '左膝壓砸傷' },
                { type: 'Burn', icd: 'T24029A', english: 'burn of left knee', chinese: '左膝燒傷' },
                { type: 'Dislocation', icd: 'S83106A', english: 'dislocation of left knee', chinese: '左膝脫位' },
                { type: 'Sprain', icd: 'S8390XA', english: 'sprain of left knee', chinese: '左膝扭傷' }
            ],
            '右膝': [
                { type: 'A/W', icd: 'S80219A', english: 'abrasion/wound of right knee', chinese: '右膝擦傷/傷口' },
                { type: 'L/W', icd: 'S81019A', english: 'laceration/wound of right knee', chinese: '右膝撕裂傷/傷口' },
                { type: 'Contusion', icd: 'S8000XA', english: 'contusion of right knee', chinese: '右膝挫傷' },
                { type: 'Fracture', icd: '髕S82009A/上脛S82109A', english: 'fracture of right patella/proximal tibia', chinese: '右髕骨/脛骨上端骨折' },
                { type: 'Crush', icd: 'S8700XA', english: 'crush injury of right knee', chinese: '右膝壓砸傷' },
                { type: 'Burn', icd: 'T24029A', english: 'burn of right knee', chinese: '右膝燒傷' },
                { type: 'Dislocation', icd: 'S83106A', english: 'dislocation of right knee', chinese: '右膝脫位' },
                { type: 'Sprain', icd: 'S8390XA', english: 'sprain of right knee', chinese: '右膝扭傷' }
            ],
            '左小腿': [
                { type: 'A/W', icd: 'S80819A', english: 'abrasion/wound of left lower leg', chinese: '左小腿擦傷' },
                { type: 'L/W', icd: 'S81819A', english: 'laceration/wound of left lower leg', chinese: '左小腿撕裂傷' },
                { type: 'Contusion', icd: 'S8010XA', english: 'contusion of left lower leg', chinese: '左小腿挫傷' },
                { type: 'Fracture', icd: '脛S82209A/腓S82409A', english: 'fracture of left tibia/fibula', chinese: '左脛骨/腓骨骨折' },
                { type: 'Crush', icd: 'S8780XA', english: 'crush injury of left lower leg', chinese: '左小腿壓砸傷' },
                { type: 'Burn', icd: 'T24039A', english: 'burn of left lower leg', chinese: '左小腿燒傷' },
                { type: 'Strain', icd: 'S86919A', english: 'strain of left lower leg', chinese: '左小腿拉傷' }
            ],
            '右小腿': [
                { type: 'A/W', icd: 'S80819A', english: 'abrasion/wound of right lower leg', chinese: '右小腿擦傷' },
                { type: 'L/W', icd: 'S81819A', english: 'laceration/wound of right lower leg', chinese: '右小腿撕裂傷' },
                { type: 'Contusion', icd: 'S8010XA', english: 'contusion of right lower leg', chinese: '右小腿挫傷' },
                { type: 'Fracture', icd: '脛S82209A/腓S82409A', english: 'fracture of right tibia/fibula', chinese: '右脛骨/腓骨骨折' },
                { type: 'Crush', icd: 'S8780XA', english: 'crush injury of right lower leg', chinese: '右小腿壓砸傷' },
                { type: 'Burn', icd: 'T24039A', english: 'burn of right lower leg', chinese: '右小腿燒傷' },
                { type: 'Strain', icd: 'S86919A', english: 'strain of right lower leg', chinese: '右小腿拉傷' }

            ],
            '左踝': [
                { type: 'A/W', icd: 'S90519A', english: 'abrasion/wound of left ankle', chinese: '左踝擦傷/傷口' },
                { type: 'L/W', icd: 'S91019A', english: 'laceration/wound of left ankle', chinese: '左踝撕裂傷/傷口' },
                { type: 'Contusion', icd: 'S9000XA', english: 'contusion of left ankle', chinese: '左踝挫傷' },
                { type: 'Fracture', icd: '脛S82209A/腓S82409A', english: 'fracture of left distal tibia/fibula', chinese: '左遠端脛骨/腓骨骨折' },
                { type: 'Crush', icd: 'S9700XA', english: 'crush injury of left ankle', chinese: '左踝壓砸傷' },
                { type: 'Burn', icd: 'T25019A', english: 'burn of left ankle', chinese: '左踝燒傷' },
                { type: 'Dislocation', icd: 'S9306XA', english: 'dislocation of left ankle', chinese: '左踝脫位' },
                { type: 'Sprain', icd: 'S93409A', english: 'sprain of left ankle', chinese: '左踝扭傷' },
                { type: 'Strain', icd: 'S96919A', english: 'strain of left ankle', chinese: '左踝拉傷' }
            ],
            '右踝': [
                { type: 'A/W', icd: 'S90519A', english: 'abrasion/wound of right ankle', chinese: '右踝關節擦傷' },
                { type: 'L/W', icd: 'S91019A', english: 'laceration/wound of right ankle', chinese: '右踝關節撕裂傷' },
                { type: 'Contusion', icd: 'S9000XA', english: 'contusion of right ankle', chinese: '右踝關節挫傷' },
                { type: 'Fracture', icd: '脛S82209A/腓S82409A', english: 'fracture of right distal tibia/fibula', chinese: '右遠端脛骨/腓骨骨折' },
                { type: 'Crush', icd: 'S9700XA', english: 'crush injury of right ankle', chinese: '右踝關節壓砸傷' },
                { type: 'Burn', icd: 'T25019A', english: 'burn of right ankle', chinese: '右踝關節燒傷' },
                { type: 'Dislocation', icd: 'S9306XA', english: 'dislocation of right ankle', chinese: '右踝關節脫位' },
                { type: 'Sprain', icd: 'S93409A', english: 'sprain of right ankle', chinese: '右踝關節扭傷' },
                { type: 'Strain', icd: 'S96919A', english: 'strain of right ankle', chinese: '右踝關節拉傷' }
            ],
            '左足部': [
                { type: 'A/W', icd: 'S90819A', english: 'abrasion/wound of left foot', chinese: '左足擦傷' },
                { type: 'L/W', icd: 'S91319A', english: 'laceration/wound of left foot', chinese: '左足撕裂傷' },
                { type: 'Contusion', icd: 'S9030XA', english: 'contusion of left foot', chinese: '左足挫傷' },
                { type: 'Fracture', icd: 'S92309A', english: 'fracture of left metatarsal bone', chinese: '左蹠骨骨折' },
                { type: 'Crush', icd: 'S9780XA', english: 'crush injury of left foot', chinese: '左足壓砸傷' },
                { type: 'Burn', icd: 'T25029A', english: 'burn of left foot', chinese: '左足部燒傷' },
                { type: 'Dislocation', icd: 'S93306A', english: 'dislocation of left foot', chinese: '左足脫位' },
                { type: 'Sprain', icd: 'S93609A', english: 'sprain of left foot', chinese: '左足扭傷' },
                { type: 'Strain', icd: 'S96919A', english: 'strain of left foot', chinese: '左足拉傷' }
            ],
            '右足部': [
                { type: 'A/W', icd: 'S90819A', english: 'abrasion/wound of right foot', chinese: '右足擦傷' },
                { type: 'L/W', icd: 'S91319A', english: 'laceration/wound of right foot', chinese: '右足撕裂傷' },
                { type: 'Contusion', icd: 'S9030XA', english: 'contusion of right foot', chinese: '右足挫傷' },
                { type: 'Fracture', icd: 'S92309A', english: 'fracture of right metatarsal bone', chinese: '右蹠骨骨折' },
                { type: 'Crush', icd: 'S9780XA', english: 'crush injury of right foot', chinese: '右足壓砸傷' },
                { type: 'Burn', icd: 'T25029A', english: 'burn of right foot', chinese: '右足燒傷' },
                { type: 'Dislocation', icd: 'S93306A', english: 'dislocation of right foot', chinese: '右足脫位' },
                { type: 'Sprain', icd: 'S93609A', english: 'sprain of right foot', chinese: '右足扭傷' },
                { type: 'Strain', icd: 'S96919A', english: 'strain of right foot', chinese: '右足拉傷' }
            ],
            '左腳趾': [
                { type: 'A/W', icd: '大S90413A/其他S90416A', english: 'abrasion/wound of left toe', chinese: '左腳趾擦傷' },
                { type: 'L/W', icd: '大S91113A/其他S91216A', english: 'laceration/wound of left toe', chinese: '左腳趾撕裂傷' },
                { type: 'Contusion', icd: '大S90119A/其他S90129A', english: 'contusion of left toe', chinese: '左腳趾挫傷' },
                { type: 'Crush', icd: '大S97119A/其他S97129A', english: 'crush injury of left toe', chinese: '左腳趾壓砸傷' },
                { type: 'Burn', icd: '大T25039A/其他T25039A', english: 'burn of left toe', chinese: '左腳趾燒傷' },
                { type: 'Fracture', icd: '大S92499A/其他S92599A', english: 'fracture of left toe', chinese: '左腳趾骨折' },
                { type: 'Sprain', icd: '大S93503A/其他S93506A', english: 'sprain of left toe', chinese: '左腳趾扭傷' },
                { type: 'Dislocation', icd: 'S93106A', english: 'dislocation of left toe', chinese: '左腳趾脫位' }
            ],
            '右腳趾': [
                { type: 'A/W', icd: '大S90413A/其他S90416A', english: 'abrasion/wound of right toe', chinese: '右腳趾擦傷' },
                { type: 'L/W', icd: '大S91113A/其他S91216A', english: 'laceration/wound of right toe', chinese: '右腳趾撕裂傷' },
                { type: 'Contusion', icd: '大S90119A/其他S90129A', english: 'contusion of right toe', chinese: '右腳趾挫傷' },
                { type: 'Crush', icd: '大S97119A/其他S97129A', english: 'crush injury of right toe', chinese: '右腳趾壓砸傷' },
                { type: 'Burn', icd: '大T25039A/其他T25039A', english: 'burn of right toe', chinese: '右腳趾燒傷' },
                { type: 'Fracture', icd: '大S92499A/其他S92599A', english: 'fracture of right toe', chinese: '右腳趾骨折' },
                { type: 'Sprain', icd: '大S93503A/其他S93506A', english: 'sprain of right toe', chinese: '右腳趾扭傷' },
                { type: 'Dislocation', icd: 'S93106A', english: 'dislocation of right toe', chinese: '右腳趾脫位' }
            ]
        };

        let selectedInjuries = [];
        let currentMainPart = '';
        let currentSubPart = '';
        let currentView = 'front';

        function switchView(view) {
            currentView = view;
            
            // 更新按鈕狀態
            document.querySelectorAll('.view-button').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // 切換圖表
            document.querySelectorAll('.diagram-container').forEach(container => {
                container.classList.remove('active');
            });
            document.getElementById(view + '-diagram').classList.add('active');
            
            // 重置選擇狀態
            hideSubParts();
            document.getElementById('injury-selector').classList.remove('active');
            document.querySelectorAll('.body-part').forEach(p => p.classList.remove('selected'));
        }

        // 為所有身體部位添加事件監聽器
        function initializeBodyParts() {
            document.querySelectorAll('.body-part').forEach(part => {
                part.addEventListener('click', function() {
                    const partName = this.getAttribute('data-part');
                    
                    // 清除當前視圖中所有部位的選中狀態
                    const currentDiagram = document.querySelector('.diagram-container.active');
                    currentDiagram.querySelectorAll('.body-part').forEach(p => p.classList.remove('selected'));
                    this.classList.add('selected');
                    
                    // 檢查是否有細部位置選項
                    if (subPartDatabase[partName]) {
                        currentMainPart = partName;
                        showSubPartSelector(partName);
                    } else {
                        showInjurySelector(partName);
                    }
                });
            });
        }

        function showSubPartSelector(partName) {
            const selector = document.getElementById('sub-part-selector');
            const title = document.getElementById('selected-main-part-title');
            const subPartsContainer = document.getElementById('sub-parts');
            
            // 隱藏其他選擇器
            document.getElementById('injury-selector').classList.remove('active');
            
            title.textContent = `${partName} - 選擇細部位置`;
            selector.classList.add('active');
            
            subPartsContainer.innerHTML = '';
            
            subPartDatabase[partName].forEach(subPart => {
                const button = document.createElement('button');
                button.className = 'sub-part';
                button.textContent = subPart.part;
                button.addEventListener('click', () => {
                    currentSubPart = subPart.part;
                    showInjurySelector(subPart.part);
                });
                subPartsContainer.appendChild(button);
            });
        }

        function showInjurySelector(partName) {
            const selector = document.getElementById('injury-selector');
            const title = document.getElementById('selected-part-title');
            const typesContainer = document.getElementById('injury-types');
            
            // 隱藏細部位置選擇器
            document.getElementById('sub-part-selector').classList.remove('active');
            
            title.textContent = `${partName} - 選擇外傷類型`;
            selector.classList.add('active');
            
            typesContainer.innerHTML = '';
            
            if (injuryDatabase[partName]) {
                injuryDatabase[partName].forEach(injury => {
                    const button = document.createElement('button');
                    button.className = 'injury-type';
                    button.textContent = injury.type;
                    button.addEventListener('click', () => addInjury(partName, injury));
                    typesContainer.appendChild(button);
                });
            }
        }

        function addInjury(partName, injury) {
            const newInjury = {
                part: partName,
                type: injury.type,
                icd: injury.icd,
                english: injury.english,
                chinese: injury.chinese,
                id: Date.now()
            };
            
            selectedInjuries.push(newInjury);
            updateInjuryList();
        }

        function removeInjury(id) {
            selectedInjuries = selectedInjuries.filter(injury => injury.id !== id);
            updateInjuryList();
        }

        function updateInjuryList() {
            const listContainer = document.getElementById('injury-list');
            
            if (selectedInjuries.length === 0) {
                listContainer.innerHTML = '<p>尚未選擇任何外傷</p>';
                return;
            }
            
            listContainer.innerHTML = selectedInjuries.map(injury => `
                <div class="injury-item">
                    <div class="injury-details">
                        ${injury.icd} - ${injury.part} ${injury.type}<br>
                        ${injury.english}
                    </div>
                    <button class="remove-injury" onclick="removeInjury(${injury.id})">×</button>
                </div>
            `).join('');
        }

        function hideSubParts() {
            document.getElementById('sub-part-selector').classList.remove('active');
            document.querySelectorAll('.body-part').forEach(p => p.classList.remove('selected'));
        }

        function backToSubParts() {
            if (currentMainPart && subPartDatabase[currentMainPart]) {
                document.getElementById('injury-selector').classList.remove('active');
                showSubPartSelector(currentMainPart);
            } else {
                document.getElementById('injury-selector').classList.remove('active');
            }
        }
        function clearReport() {
            const reportOutput = document.getElementById('report-output');
            reportOutput.textContent = '';
            reportOutput.classList.remove('active');
            // 清除已登記外傷
            selectedInjuries = [];
            updateInjuryList();
            hideSubParts();
            document.getElementById('injury-selector').classList.remove('active');
            document.querySelectorAll('.body-part').forEach(p => p.classList.remove('selected'));
        }
        function generateReport() {
            const reportOutput = document.getElementById('report-output');
    
            if (selectedInjuries.length === 0) {
                alert('請先選擇至少一項外傷！');
                return;
            }
    
            let icdSection = '';
            let chineseSection = '';
            let englishSection = '';
    
            selectedInjuries.forEach(injury => {
                icdSection += `${injury.icd} - ${injury.part}${injury.type}\n`;
                chineseSection += `*. ${injury.chinese}\n`;
                englishSection += `*. ${injury.english}\n`;
            });
    
            let report = icdSection + '\n' + chineseSection + '\n' + englishSection;
    
            reportOutput.textContent = report.trim();
            reportOutput.classList.add('active');
        }

        // 頁面切換功能
        document.querySelector('.sidebar').addEventListener('click', function(e) {
            const targetPage = e.target.getAttribute('data-page');
            if (!targetPage) return;
            
            document.querySelectorAll('.content').forEach(content => {
                content.classList.add('hidden');
            });
            
            document.getElementById(targetPage).classList.remove('hidden');
            
            // 如果切換到 Certificate 頁面，重新載入時間
            if (targetPage === 'Diagnosis') {
                updateCertificateDate();
            }
        });

        // PE分頁切換功能
        document.querySelector('.pe-tabs')?.addEventListener('click', function(e) {
            const targetTab = e.target.getAttribute('data-tab');
            if (!targetTab) return;
            
            document.querySelectorAll('.pe-content').forEach(content => {
                content.classList.add('hidden');
            });
            
            document.getElementById(targetTab).classList.remove('hidden');
        });

        // ICD搜尋功能
        let csvData = [];
        let headers = [];
        let searchTimeout;

        // 載入 CSV 檔案
        showLoading();
        fetch('ICD_10_CM.csv')
            .then(response => response.text())
            .then(data => {
                Papa.parse(data, {
                    complete: function(results) {
                        csvData = results.data;
                        headers = csvData[0];
                        hideLoading();
                        document.getElementById('minLengthNotice').textContent = 
                            '請輸入至少2個字元開始搜尋';
                    }
                });
            });

        function showLoading() {
            document.getElementById('results').innerHTML = 
                '<div class="loading">載入中，請稍候...</div>';
        }

        function hideLoading() {
            document.getElementById('results').innerHTML = '';
        }

        function debounceSearch() {
            clearTimeout(searchTimeout);
            searchTimeout = setTimeout(searchData, 300);
        }

        function searchData() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            
            document.getElementById('results').innerHTML = '';
            document.getElementById('countInfo').textContent = '';
            document.getElementById('minLengthNotice').textContent = '';

            if (searchTerm.length < 2) {
                document.getElementById('minLengthNotice').textContent = 
                    '請輸入至少2個字元開始搜尋';
                return;
            }

            const filteredData = csvData.filter((row, index) => {
                if (index === 0) return false;
                
                const icdCode = row[0]?.toString().toLowerCase() || '';
                const icdName = row[1]?.toString().toLowerCase() || '';
                const icdNameCh = row[2]?.toString().toLowerCase() || '';
                
                return icdCode.includes(searchTerm) || 
                       icdName.includes(searchTerm) || 
                       icdNameCh.includes(searchTerm);
            });

            displayData([headers, ...filteredData]);
        }

        function displayData(data) {
            if (!data || data.length <= 1) {
                document.getElementById('results').innerHTML = '<p>找不到符合的結果</p>';
                document.getElementById('countInfo').textContent = '找到 0 筆符合的資料';
                return;
            }

            let table = '<table><thead><tr>';
            
            data[0].forEach(header => {
                table += `<th>${header}</th>`;
            });
            
            table += '</tr></thead><tbody>';

            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            for (let i = 1; i < data.length; i++) {
                table += '<tr>';
                data[i].forEach(cell => {
                    const cellContent = cell || '';
                    const cellStr = cellContent.toString();
                    if (searchTerm && cellStr.toLowerCase().includes(searchTerm)) {
                        const highlightedContent = cellStr.replace(
                            new RegExp(searchTerm, 'gi'),
                            match => `<mark>${match}</mark>`
                        );
                        table += `<td>${highlightedContent}</td>`;
                    } else {
                        table += `<td>${cellStr}</td>`;
                    }
                });
                table += '</tr>';
            }

            table += '</tbody></table>';
            document.getElementById('results').innerHTML = table;
            document.getElementById('countInfo').textContent = 
                `找到 ${data.length - 1} 筆符合的資料`;
        }

        // 自動填入診斷證明書的日期
        function updateCertificateDate() {
            const today = new Date();
            const taiwanYear = today.getFullYear() - 1911; // 民國年
            const month = today.getMonth() + 1;
            const day = today.getDate();
            const hours = today.getHours();
            const minutes = today.getMinutes();
            
            // 格式化時間（補0）
            const formattedHours = hours.toString().padStart(2, '0');
            const formattedMinutes = minutes.toString().padStart(2, '0');
            
            // 更新證明書文字
            const certificateText = `病患因上述疾病於民國${taiwanYear}年${month}月${day}日${formattedHours}時${formattedMinutes}分至${formattedHours}時${formattedMinutes}分期間至本院急診就診並接受檢查，建議休養三日並門診追蹤複查。<br>
                    病患因上述疾病於民國${taiwanYear}年${month}月${day}日${formattedHours}時${formattedHours}分至${formattedHours}時${formattedMinutes}分期間至本院急診就診並接受傷口縫合 針，建議門診追蹤複查。
`;
            document.getElementById('certificateText').innerHTML = certificateText;
        }
        document.addEventListener('DOMContentLoaded', function() {
            // 只在外傷系統頁面載入時初始化
            if (document.getElementById('Trauma_System')) {
                initializeBodyParts();
            }
        });

        // 初始顯示第一個分頁
        document.getElementById('History').classList.remove('hidden');
        
        // 頁面載入時執行日期填入
        updateCertificateDate();
    </script>
</body>
</html>
